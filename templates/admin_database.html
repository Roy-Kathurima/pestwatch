<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Database</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="topbar"><h1>Admin - Database</h1><nav><a href="{{ url_for('admin_dashboard') }}">Dashboard</a><a href="{{ url_for('admin_logout') }}">Logout</a></nav></header>
  <main class="container">
    <h2>Login logs</h2>
    <table class="table">
      <thead><tr><th>ID</th><th>Email</th><th>IP</th><th>Success</th><th>When</th></tr></thead>
      <tbody>
        {% for l in logs %}
        <tr>
          <td>{{ l.id }}</td>
          <td>{{ l.email }}</td>
          <td>{{ l.ip }}</td>
          <td>{{ 'YES' if l.success else 'NO' }}</td>
          <td>{{ l.timestamp }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <h3>Users</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Joined</th></tr></thead>
      <tbody>
        {% for u in users %}
        <tr><td>{{ u.id }}</td><td>{{ u.fullname }}</td><td>{{ u.email }}</td><td>{{ u.role }}</td><td>{{ u.created_at }}</td></tr>
        {% endfor %}
      </tbody>
    </table>

    <h3>Reports</h3>
    <table class="table">
      <thead><tr><th>ID</th><th>Title</th><th>User</th><th>Coords</th><th>Created</th></tr></thead>
      <tbody>
        {% for r in reports %}
        <tr><td>{{ r.id }}</td><td>{{ r.title }}</td><td>{{ r.user_id }}</td><td>{{ r.latitude }}, {{ r.longitude }}</td><td>{{ r.created_at }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </main>
</body>
</html>
