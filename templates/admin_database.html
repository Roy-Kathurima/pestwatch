@app.route("/admin/database", methods=["GET", "POST"])
def admin_database():
    if request.method == "POST":
        pwd = request.form.get("password", "")
        if pwd != app.config["ADMIN_PASSWORD"]:
            flash("Invalid admin password.", "error")
            return redirect(url_for("admin_database"))

        # password correct → show database page
        users = User.query.order_by(User.created_at.desc()).all()
        reports = Report.query.order_by(Report.created_at.desc()).all()
        return render_template("admin_database.html", users=users, reports=reports)

    # first time opening page → show password form
    return render_template("admin_database_password.html")
