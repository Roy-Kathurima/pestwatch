<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>New Report - {{ user.fullname }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="topbar"><h1>PestWatch</h1></header>
  <main class="container">
    <h2>Submit new report</h2>
    <form method="post" enctype="multipart/form-data" class="form">
      <label>Title<input name="title" required></label>
      <label>Description<textarea name="description"></textarea></label>
      <label>Photo<input type="file" name="photo" accept="image/*"></label>

      <div class="geo-row">
        <label>Latitude<input id="latitude" name="latitude" readonly></label>
        <label>Longitude<input id="longitude" name="longitude" readonly></label>
      </div>

      <p>
        <button type="button" class="btn" id="get-location">Use device location</button>
        <small>Or fill latitude/longitude manually</small>
      </p>

      <button class="btn" type="submit">Submit</button>
    </form>

    <script>
      document.getElementById("get-location").addEventListener("click", function(){
        if (!navigator.geolocation) {
          alert("Geolocation not supported by your browser.");
          return;
        }
        navigator.geolocation.getCurrentPosition(function(pos){
          document.getElementById("latitude").value = pos.coords.latitude;
          document.getElementById("longitude").value = pos.coords.longitude;
        }, function(err){
          alert("Could not get location: " + err.message);
        });
      });
    </script>
  </main>
</body>
</html>
