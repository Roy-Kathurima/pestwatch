{% extends "base.html" %}
{% block content %}
  <h2>Submit Pest Report</h2>
  <form method="post" enctype="multipart/form-data">
    <label>Pest name<br><input name="pest" required></label><br>
    <label>Description<br><textarea name="desc"></textarea></label><br>
    <label>Latitude<br><input id="lat" name="lat" required></label><br>
    <label>Longitude<br><input id="lon" name="lon" required></label><br>
    <button type="button" onclick="getLocation()">Use My Location</button><br><br>
    <label>Photo (optional)<br><input type="file" name="image" accept="image/*"></label><br><br>
    <button type="submit">Submit</button>
  </form>

<script>
function getLocation() {
  if (!navigator.geolocation) {
    alert("Geolocation not supported");
    return;
  }
  navigator.geolocation.getCurrentPosition(function(position) {
    document.getElementById("lat").value = position.coords.latitude;
    document.getElementById("lon").value = position.coords.longitude;
  }, function(err) {
    alert("Could not get location: " + err.message);
  }, { enableHighAccuracy: true });
}
</script>
{% endblock %}
