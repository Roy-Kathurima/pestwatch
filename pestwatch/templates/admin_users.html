{% extends "base.html" %}
{% block content %}
  <h2>Registered Farmers</h2>
  <table>
    <tr><th>ID</th><th>Username</th><th>Email</th><th>Active</th><th>Joined</th><th>Actions</th></tr>
    {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>{{ 'Yes' if u.is_active else 'No' }}</td>
        <td>{{ u.created_at }}</td>
        <td>
          <form style="display:inline" method="post" action="{{ url_for('admin_toggle_user', uid=u.id) }}">
            <button type="submit">{{ 'Disable' if u.is_active else 'Enable' }}</button>
          </form>
          <form style="display:inline" method="post" action="{{ url_for('admin_delete_user', uid=u.id) }}" onsubmit="return confirm('Delete user?')">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </table>
{% endblock %}
