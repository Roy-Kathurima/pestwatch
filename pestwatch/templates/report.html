{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Submit Report</h2>
  <form method="post" action="{{ url_for('auth.report') }}" enctype="multipart/form-data">
    <label>Pest name<br><input name="pest" required></label><br>
    <label>Description<br><textarea name="description"></textarea></label><br>
    <label>Location (text)<br><input name="location"></label><br>

    <label>Latitude<br><input id="lat" name="latitude" required></label><br>
    <label>Longitude<br><input id="lon" name="longitude" required></label><br>

    <button type="button" onclick="getLoc()">Use My Location</button><br><br>

    <label>Photo<br><input type="file" name="image" accept="image/*"></label><br>
    <button type="submit">Submit Report</button>
  </form>
</div>

<script>
function getLoc(){
  if (!navigator.geolocation) { alert("Geolocation not supported"); return; }
  navigator.geolocation.getCurrentPosition(function(p){
    document.getElementById("lat").value = p.coords.latitude;
    document.getElementById("lon").value = p.coords.longitude;
  }, function(e){ alert("Could not get location: " + e.message); }, {enableHighAccuracy:true});
}
</script>
{% endblock %}
